# filecoin算力货币化

filecoin的挖矿活动是十分重资产的活动，投资巨大。本设计最初的想法是帮助矿工在ETH上快速募集资金，通过自动和合约及语言机自动化的完成算力的购买及奖励自动分发，免除矿商和用户之间繁琐的交易流程及各种合同。filecoin整个挖矿过程中存在两大实体，一个是资金FIl，一个是算力Sector。另外就是一堆复杂的算法。算法尽管复杂但都是filecoin上确定性的算法，最终所有都会落到filecoin链上可确保可验证的数据，如果我们将FIL和Sector映射到以太坊上。在通过预言机不断的将filecoin的链上数据喂到以太坊上，那么可以认为我们把filecoin的挖矿映射到以太坊上。这样币圈用户可以直接通过ETH在以太坊上购买算力，并获取相应的收益。

合约设计：
    * ERC20用于将FIl直接映射到以太坊上。
    * ESector用于管理FIL的链上sector信息。管理所有注册矿工及其所属的sector。 每个sector都要和filecoin上真实sector具有相同的生命周期，相同的大小，相同的订单收益率。
    * SectorMarket合约管理三种数据
        1. 矿工基本信息，矿工id，矿工ETH地址， 算力占比，抵押金大小，抽成比例等
        1. 用户认购的sector以及每个sector的总收益，订单收益，挖矿收益，锁定收益，已提取收益及可提取收益。
        2. 矿工为售出sector的抵押，为了矿工提前终止服务，矿工需要为售出的sector提供一定的抵押金

预言机设计：
    * Sector信息更新，预言机解析区块的所有ProveCommit消息，并将这个消息对应Miner和Sector相关信息上到ESector合约里面。
    * 奖励更新，每个区块完成之后检查Sector，获取收益的矿工需要将这一笔收益更新到SectorMarket合约里面
    * 订单收益，每隔一定的区块数目，汇总订单的收益写入到SectorMarket合约里。

[](../images/filtoeth.png)

通过这三个合约及预言机可以吧filecoin的挖矿行为映射到矿上，用户可以通过认购sector购买算力，矿工可以提前出手sector来回收资金。更有趣的事情，是把filecoin的两种有价值的资产都映射到了以太坊，提供了更丰富的交易方式，进一步来说，还可以通过二级货币的方式参与DEFI的抵押借贷来衍生更多的玩法。